#!/bin/sh

# Read the input from stdin, which provides information about the refs being pushed
while read local_ref local_sha remote_ref remote_sha
do
    # Check if the remote branch being pushed to is 'main'
    if [ "$remote_ref" = "refs/heads/main" ]; then
        echo "Error: Direct pushes to the 'main' branch are not allowed. Please use a pull request." >&2
        exit 1 # Abort the push
    fi
done

exit 0 # Allow the push if no issues are found
